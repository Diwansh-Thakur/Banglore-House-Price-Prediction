<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bangalore Home Price Prediction</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    :root{
      --violet-1: #7c3aed;
      --violet-2: #4f46e5;
      --bg: #0a0014;
      --card-bg: rgba(27,16,48,0.85);
      --accent: rgba(137,99,254,0.85);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:"Poppins",sans-serif;
      background:linear-gradient(180deg,#07010a 0%, #0a0014 100%);
      color:#e8e6ff;
      height:100vh;
      display:flex;
      overflow:hidden;
    }

    .wrap{
      display:flex;
      width:100%;
      height:100vh;
    }

    /* left form */
    .left {
      width:44%;
      padding:56px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      z-index:3;
      flex-direction: column;
    }
    .glow {
      position:absolute;
      width:420px;height:420px;
      left:20px; top:-120px;
      background: radial-gradient(circle,#4f46e5 0%, transparent 60%);
      filter:blur(80px); opacity:0.28; z-index:1;
      animation: drift 8s ease-in-out infinite alternate;
    }
    @keyframes drift{from{transform:translateY(0)}to{transform:translateY(30px)}}

    .card{
      width:420px;
      background:var(--card-bg);
      border-radius:18px;
      padding:34px;
      box-shadow:0 12px 40px rgba(79,70,229,0.08), inset 0 1px 0 rgba(255,255,255,0.02);
      backdrop-filter: blur(8px);
      position:relative; z-index:5;
    }

    h1{
      color:var(--violet-1);
      font-size:26px;
      margin-bottom:22px;
      text-shadow:0 0 18px rgba(116,81,255,0.12);
    }

    label{display:block;margin-top:14px;color:#dcd4ff;font-weight:600}
    input, select{
      margin-top:8px;
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:none;
      background:#1b1030;
      color:#efeaff;
      outline:none;
      box-shadow: 0 6px 18px rgba(79,70,229,0.06);
      font-size:15px;
      transition:box-shadow .25s, transform .12s;
    }
    input:focus, select:focus{ box-shadow:0 0 20px rgba(116,81,255,0.18); transform: translateY(-2px); }

    button{
      margin-top:22px;
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:none;
      background:linear-gradient(90deg,var(--violet-2),var(--violet-1));
      color:#fff;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
      box-shadow:0 10px 30px rgba(79,70,229,0.18);
      transition: transform .12s, box-shadow .12s;
    }
    button:hover{ transform:translateY(-3px); box-shadow:0 18px 40px rgba(116,81,255,0.26) }

    .result{
      margin-top:18px;
      padding:12px;
      background:rgba(116,81,255,0.06);
      color:var(--accent);
      border-radius:10px;
      font-weight:700;
      text-align:center;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    }

    /* Footer credit */
    .footer {
      margin-top:20px;
      text-align:center;
      color:#9b8cff;
      font-size:14px;
      font-weight:600;
      letter-spacing:1px;
      text-shadow:0 0 8px rgba(137,99,254,0.6);
      animation: glowText 2s ease-in-out infinite alternate;
    }
    @keyframes glowText {
      from { text-shadow:0 0 8px rgba(137,99,254,0.4); }
      to { text-shadow:0 0 16px rgba(137,99,254,0.9); }
    }

    /* right slideshow */
    .right{
      width:56%;
      position:relative;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg, rgba(16,6,36,0.6) 0%, rgba(10,0,20,0.9) 100%);
    }

    .slides {
      position:relative;
      width:100%;
      height:100%;
    }

    .slide{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      background-size:cover;
      background-position:center;
      opacity:0;
      transition:opacity 1.5s ease-in-out, transform 1.5s ease;
      transform: scale(1.05);
    }
    .slide.active{ opacity:1; transform: scale(1); }

    .overlay {
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(10,4,20,0.18) 0%, rgba(6,2,12,0.45) 100%);
      z-index:2;
      pointer-events:none;
    }

    .nav{
      position:absolute;
      top:50%;
      width:100%;
      transform:translateY(-50%);
      z-index:3;
      display:flex;
      justify-content:space-between;
      padding:0 20px;
      pointer-events:none;
    }
    .btn {
      pointer-events:auto;
      background: rgba(0,0,0,0.45);
      border:none;
      color:#e8e6ff;
      width:48px; height:48px;
      border-radius:999px;
      cursor:pointer;
      font-size:22px;
      display:flex; align-items:center; justify-content:center;
      transition:background .18s, box-shadow .18s, transform .12s;
      box-shadow: 0 6px 20px rgba(79,70,229,0.08);
    }
    .btn:hover{ background: linear-gradient(90deg, rgba(79,70,229,0.22), rgba(124,58,237,0.24)); transform:scale(1.05); }

    @media (max-width:900px){
      .left{ width:100%; height:60vh; padding:28px; }
      .right{ width:100%; height:40vh; }
      .card{ width:100% }
    }

  </style>
</head>
<body>
  <div class="wrap">
    <!-- LEFT: form -->
    <div class="left">
      <div class="glow" aria-hidden="true"></div>
      <div class="card">
        <h1>Bangalore Home Price Predictor</h1>

        <label for="location">Location</label>
        <select id="location">
          {% for loc in locations %}
            <option value="{{ loc }}">{{ loc }}</option>
          {% endfor %}
        </select>

        <label for="sqft">Total Square Feet</label>
        <input id="sqft" type="number" placeholder="e.g. 1200" />

        <label for="bhk">BHK</label>
        <input id="bhk" type="number" placeholder="e.g. 3" />

        <label for="bath">Bathrooms</label>
        <input id="bath" type="number" placeholder="e.g. 2" />

        <button id="predictBtn">Predict Price</button>
        <div id="result" class="result" aria-live="polite"></div>
      </div>

      <div class="footer">‚ú® Created with ‚ù§Ô∏è by <span style="color:var(--violet-1)">Diwansh</span> ‚ú®</div>
    </div>

    <!-- RIGHT: slideshow -->
    <div class="right">
      <div class="slides" id="slides">
        <!-- 10 tested Unsplash images -->
        <div class="slide active" style="background-image:url('https://images.unsplash.com/photo-1600585153936-7c7b5a8d3f49?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1568605114967-8130f3a36994?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1570129477492-45c003edd2be?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1605276374104-dee2a0ed3cd6?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1554995207-c18c203602cb?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1600585154526-990dced4db0d?auto=format&fit=crop&w=1600&q=80')"></div>
        <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1560185008-5a3d4e2b4a56?auto=format&fit=crop&w=1600&q=80')"></div>
      </div>

      <div class="overlay"></div>

      <div class="nav">
        <button class="btn prev" id="prevBtn">‚Äπ</button>
        <button class="btn next" id="nextBtn">‚Ä∫</button>
      </div>
    </div>
  </div>

  <script>
    const predictBtn = document.getElementById('predictBtn');
    const resultDiv = document.getElementById('result');

    predictBtn.addEventListener('click', async () => {
      const sqft = document.getElementById('sqft').value;
      const bhk = document.getElementById('bhk').value;
      const bath = document.getElementById('bath').value;
      const location = document.getElementById('location').value;

      if (!sqft || !bhk || !bath) {
        resultDiv.textContent = '‚ö†Ô∏è Please fill all fields';
        return;
      }

      resultDiv.textContent = 'Calculating...';

      try {
        const resp = await fetch('/predict_home_price', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ sqft: parseFloat(sqft), bhk: parseInt(bhk), bath: parseInt(bath), location })
        });
        const data = await resp.json();
        let price = Number(data.estimated_price);

        if (price >= 100) {
          const crore = price / 100;
          resultDiv.innerHTML = `üí∞ Estimated Price: <strong>‚Çπ ${crore.toFixed(2)} Crore</strong>`;
        } else {
          resultDiv.innerHTML = `üí∞ Estimated Price: <strong>‚Çπ ${price.toFixed(2)} Lakh</strong>`;
        }
      } catch (err) {
        console.error(err);
        resultDiv.textContent = 'Server error ‚Äî check terminal';
      }
    });

    // -------- Slideshow --------
    const slides = Array.from(document.querySelectorAll('.slide'));
    let current = 0;
    let autoTimer = null;
    const INTERVAL = 5000;

    function show(idx){
      slides.forEach((s,i)=> s.classList.toggle('active', i===idx));
      current = idx;
    }

    function startAuto(){
      autoTimer = setInterval(()=> show((current+1)%slides.length), INTERVAL);
    }
    function stopAuto(){
      clearInterval(autoTimer); autoTimer=null;
    }

    document.getElementById('nextBtn').addEventListener('click', ()=>{ stopAuto(); show((current+1)%slides.length); startAuto(); });
    document.getElementById('prevBtn').addEventListener('click', ()=>{ stopAuto(); show((current-1+slides.length)%slides.length); startAuto(); });

    document.querySelector('.right').addEventListener('mouseenter', stopAuto);
    document.querySelector('.right').addEventListener('mouseleave', startAuto);

    show(0);
    startAuto();
  </script>
</body>
</html>
